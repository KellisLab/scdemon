* scdemon
** algorithm checklist
*** Normalization
batteries included
*** SVD/PCA/LSI
need extraction
*** PC filtering/adjustment
*** Adjacency
KNN with many NN -> 100? 500?

**** Full -> indices, indptr
**** Annoy (R/Python) -> indices, indptr (angular; need to pre-Zscore)
**** PyNNDescent (Python) -> indices, indptr (correlation)
*** Filtering KNN
Using CSR input -> indices, indptr,
compute standard errors and p-values
*** Community detection
BigCLAM/Leiden
** structure
| directory   | description |
|-------------+-------------|
| src/scdemon | C++         |
| src/rcpp    | C++ in R    |
| scdemon/    | python      |
| R/          | R code      |

*** Code structure / flow
1. Extract $U$ $\Sigma$ $V'$, ensure =std=, =n_cells_by_counts=, =covariates= are present.
2. ANN search. Use RAnnoy (angular) /PyNNDescent (correlation), but need interface for gene-wise. For angular, need to z-score $V'$ beforehand.
3. SE estimation. Use all dependencies, build in parallel with C++/OpenMP
4. p-value calculation and filtering (in R/Python), build graph
5. Community detection in C++/OpenMP (leidenalg/bigclam)
**** Dataset storage 
- .varp: PCA based ANN (bool)
- .varp: filtered graph (CSR, data=tvalue)
- .var / .varm: clustering / cluster loadings
**** API
***** build_nn_graph
1. extract dimreduc, variables, covariates using params. Order obs/obsm based statistics if applicable.
2. ANN search (unless varp_from string is non-null. Save in this string if varp doesn't exist)
3. SE estimation (C++)
4. Prune edges, then nodes. (based on params)
5. Save in varp_to, same name as varp_from unless set
***** leiden(resolution) or bigclam(ncomm)
** large to-dos (ordered by importance)
*** TODO C++ demo code linked to python and R
*** TODO HC0 SE in C++
*** TODO KNN interface in R/Python
*** TODO pkgdown website
*** TODO sphinx/readthedocs
*** TODO vignettes in R and python
*** TODO bigclam in C++
*** TODO bigclam python/R interface
*** TODO C++ tests 
*** TODO clustered standard errors in C++: group by sample/batch
*** TODO Newey-West in C++ : sort by sample depth to account for depth autocorrelation
*** TODO Submit to bioconda (R, python versions)




